{% extends 'navbar.html' %}
{% block content %}
<html>
  <head>
    <style>
      table, th, td {
  border: 1px solid white;
  border-collapse: collapse;
}
th, td {
  background-color: #96D4D4;
}
    </style>
    <h1>{{ process_name }} process</h1>
  </head>
  <body>
    <br>
    <div id="datefilter-container">
        <p class="js-command">Please select the date for filter </p>
        <div id="datefilter">
          <form name="date-range-form" id="date-range-form"
            method="post">
            <label for="start">Start date:</label>
            <input type="date" id="date_from" name="date_from">
            <label for="end">End date:</label>
            <input type="date" id="date_to" name="date_to">
            <button type="submit" name="date_filter">Submit</button>
          </form>
        </div>
      </div>
    
    {% if date_from %}
    <p>Filtered date from {{date_from}} to date {{date_to}}</p>
    {% endif %}

    <label for="Time">Time per Transaction</label>
    <input type="text" name="tpt" id="tpt">
    <label for="valueph">Value / Hours</label>
    <input type="text" name="value_per_hours" id="value_per_hours" onblur="calculate()">
    <label for="time_save_display">Time save : </label>
    <p id="time_save"></p>

    

    <table style="width:100%">
      <tr>
        <th>Robot timestamp</th>
        <th>Sever timestamp(UTC)</th>
        <th>Process Name</th>
        <th>Computer Name</th>
        <th>Customer Name</th>
        <th>comment</th>
        <th>reason</th>
        <th>Transaction amount</th>
        <th>Robot runtime</th>
      </tr>
    {% for log in logtable %}
      <tr>
        <td>{{ log.robot_timestamp }}</td>
        <td>{{ log.server_timestamp }}</td>
        <td>{{ log.process.process_name }}</td>
        <td>{{ log.process.computer_name }}</td>
        <td>{{ log.process.customer_name }}</td>
        <td>{{ log.comment }}</td>
        <td>{{ log.reason }}</td>
        <td>{{ log.transaction_amount }}</td>
        <td>{{ log.robot_runtime }}</td>
      </tr>

    {% endfor %}
      <tr>
        <td colspan="7" align="center">Total Transaction / Total Runtime  : </td>
        <td id="total_transacetion">{{ total_transactions }}</td>
        <td id="runtime_sum">{{ runtime_sum }}</td>
      </tr>
    </table>

    <script type="text/javascript">
      var time_save=0;
      var runtime_sum = document.getElementsByName('runtime_sum');
      var total_transacetion = Number(document.getElementsByName('total_transacetion'));
      const runtime_split = runtime_sum.split(":");

      time_save = ((runtime_split[0]*60*60)+(runtime_split[1]*60)+(runtime_split[3]))*total_transacetion
      document.getElementById('time_save').innerHTML = runtime_split;

      function calculate(){
          var tpt = document.getElementsByName('tpt');
          var value = document.getElementsByName('value');
          
          
      }
      
    </script>
  </body>
</html>
{% endblock %}
